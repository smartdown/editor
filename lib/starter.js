let currentThemeName="";function scrollToSubHash(e){let t=!0;if(e){const s=document.getElementById(e);s&&(t=!1,window.setTimeout((()=>{s.scrollIntoView({behavior:"smooth"})}),300))}t&&window.scrollTo({top:0,behavior:"smooth"})}function starter(e,t){let s="Home",n="https://unpkg.com/smartdown/dist/",o=n+"lib/resources/",i=window.location.origin+window.location.pathname,r="",a="gist/",l="#smartdown-output",c=null,d={cloud:"/gallery/resources/cloud.jpg",badge:"/gallery/resources/badge.svg",hypercube:"/gallery/resources/Hypercube.svg",StalactiteStalagmite:"/gallery/resources/StalactiteStalagmite.svg",church:"/gallery/resources/church.svg",lighthouse:"/gallery/resources/lighthouse.svg",barn:"/gallery/resources/barn.svg","medieval-gate":"/gallery/resources/medieval-gate.svg"},m={},u="",h="",f="";"string"===typeof smartdownBaseURL&&(n=smartdownBaseURL),"string"===typeof smartdownResourceURL&&(o=smartdownResourceURL),"string"===typeof smartdownDefaultHome&&(s=smartdownDefaultHome),"string"===typeof smartdownGistPathPrefix&&(r=smartdownGistPathPrefix),"string"===typeof smartdownGistHashPrefix&&(a=smartdownGistHashPrefix),"string"===typeof smartdownRawPrefix&&(i=smartdownRawPrefix),"string"===typeof smartdownOutputDivSelector&&(l=smartdownOutputDivSelector),"function"===typeof smartdownPostLoadMutator&&(c=smartdownPostLoadMutator),"object"===typeof smartdownMedia&&(d=Object.assign(d,smartdownMedia));let w=i;function p(e,t,n,o,r){c&&(e=c(e,t,n,s)),m=smartdown.partitionMultipart(e);const a=document.getElementById(o);u="#"+t,w!==i&&(u="#"+n);let l=window.location.search;""!==currentThemeName&&(l=`?theme=${currentThemeName}`);let d="_default_";if(0!==t.indexOf("http:")&&0!==t.indexOf("https:")&&t.indexOf(":")>=0){const e=t.split(":");d=e[e.length-1]}smartdown.setHome(m[d],a,(function(){let e="#"+t;r&&"undefined"!==r&&(e+="#"+r),window.history.pushState({},"",window.location.pathname+e+l),scrollToSubHash(r),a.id||(a.id="smartdown-output-"+String(Math.random()).slice(2)),smartdown.startAutoplay(a)}))}function g(e,t,s,n){const o=new XMLHttpRequest;o.addEventListener("load",(function(){p(this.responseText,e,t,s,n)})),o.open("GET",t),o.send()}function x(e,t){let s=null,n=null;0!==e.indexOf("#")&&(e="#"+e);const o=e.split("#");if(o.length>1){if(s=o[1],n=o[2],n&&(n=n.split("?")[0]),""!==u&&"#"+s===u)return window.history.replaceState({},"",window.location.pathname+e),void scrollToSubHash(n)}else console.log("... illformatted cardKeyWithHash",e);const c="^/?("+r+")?"+a+"([^/]+)/([^/]+)(/(\\w*))?$",d=new RegExp(c,"g"),p=d.exec(s);if(p){h=p[2],f=p[3];const e=p[5]||"Home";s=e}const x=m[s];if(x){const e=document.querySelectorAll(l)[0];smartdown.setHome(x,e,(function(){e.id||(e.id="smartdown-output-"+String(Math.random()).slice(2)),smartdown.startAutoplay(e)}))}else if(0===s.indexOf("http")){h="",f="";const e=s.lastIndexOf("/");e>0&&(w=s.slice(0,e+1)),g(s,s,t,n)}else if(0===s.indexOf("/"))h="",f="",w=i,g(s,s,t);else if(""!==h&&""!==f){const e="https://api.github.com/gists/"+f,o=new XMLHttpRequest;o.addEventListener("load",(function(){const o=JSON.parse(this.responseText),i=o.files[s+".md"];if(i){const e=i.raw_url;s=a+h+"/"+f+"/"+s,w="https://gist.githubusercontent.com/"+h+"/"+f+"/raw/",g(s,e,t,n)}else console.log('Unable to locate Gist for "',s,'" ',e)})),o.open("GET",e),o.send()}else if(s.indexOf(":")>=0){const e=s.split(":"),o=e.slice(0,-1).join(":"),i=""===o?"":o+".md",r=w+i;g(s,r,t,n)}else{h="",f="";const e=s.endsWith(".md")?"":".md";let o=w+s+e;if(w.endsWith("/public/smartdown/")){const t=w.split("/"),n=t.slice(0,-2).join("/");o=n+"/"+s+e}g(s,o,t,n)}}function y(e){const t=document.getElementById("smartdown-outer-container");t&&""!==e&&([...t.classList].forEach((e=>{0===e.indexOf("smartdown-theme-")&&t.classList.remove(e)})),t.classList.add(`smartdown-theme-${e}`))}function b(e){let t=window.location.hash;if(e){const s=t.split("/"),n=e.split("/");t=e,4===n.length&&4===s.length&&(n[3]=s[3],t=n.join("/"))}let n="";const o=t.indexOf("?");if(o>=0){n=t.slice(o+1),t=t.slice(0,o);const e=n.indexOf("?");e>=0&&(n=n.slice(0,e));const s=new URLSearchParams(n);currentThemeName=s.get("theme")||""}if(""===currentThemeName){const e=window.location.search,t=new URLSearchParams(e);currentThemeName=t.get("theme")||""}y(currentThemeName),""===t&&(t=s),x(t,document.querySelectorAll(l)[0].id)}const O=smartdown.defaultCalcHandlers,v=i;function S(){let e=w,t=window.location.hash;const s=t.indexOf("?");if(s>=0&&(t=t.slice(0,s)),r.length>0&&window.location.pathname.endsWith(r)){const s="^/?("+r+")?"+a+"([^/]+)/([^/]+)(/(\\w*))?$",n=new RegExp(s,"g"),o=n.exec(t);if(o){const t=o[2].replace("#",""),s=o[3];e="https://gist.githubusercontent.com/"+t+"/"+s+"/raw/"}}else if(a.length>0&&0===t.indexOf("#"+a)){const s="^#"+a+"([^/]+)/([^/]+)(/(\\w*))?$",n=new RegExp(s,"g"),o=n.exec(t);if(o){const t=o[1],s=o[2];e="https://gist.githubusercontent.com/"+t+"/"+s+"/raw/"}}else if(0===t.indexOf("#https://gist.githubusercontent.com/")){const s="^#https://gist.githubusercontent.com/([^/]+)/([^/]+)/.*$",n=new RegExp(s,"g"),o=n.exec(t);if(o){const t=o[1],s=o[2];e="https://gist.githubusercontent.com/"+t+"/"+s+"/raw/"}}return e}const T=[{prefix:"/block/",replace:S},{prefix:"block/",replace:S},{prefix:"assets/",replace:v+"assets/"},{prefix:"/assets/",replace:v+"assets/"},{prefix:"content/",replace:v+"content/"},{prefix:"/content/",replace:v+"content/"},{prefix:"/gallery/resources/",replace:""===o?"/gallery/resources/":o},{prefix:"/gallery/DataElements.csv",replace:"/smartdown/"===n?"/smartdown/gallery/DataElements.csv":"/gallery/DataElements.csv"},{prefix:"/resources/",replace:""===o?"/resources/":o}];function H(e){const t=e.oldURL,n=t.indexOf("#"),o=t.indexOf("?");let i="";o>=0&&(i=n>o?t.slice(o,n-1):t.slice(o));let r=window.location.hash,a="";const c=r.indexOf("?");if(c>=0&&(a=r.slice(c+1),r=r.slice(0,c),0===a.indexOf("theme=")&&(currentThemeName=a.slice(6),y(currentThemeName))),u===r)console.log("...locationHashChanged INHIBIT",window.location.hash,r,u),scrollToSubHash();else{let t=r.slice(1);""===t?t=s:-1===t.indexOf("/")&&(h="",f="",t="#"+t);let n=null;const o=t.split("#");o.length>1&&(t=o[1],n=o[2],""===t&&(t=u),t=t+"#"+n+i),x(t,document.querySelectorAll(l)[0].id),e.preventDefault(),e.stopImmediatePropagation()}return!1}function R(){b(e)}window.onhashchange=H,t||(t=R),smartdown.initialize(d,n,t,x,O,T)}window.smartdownStarter=starter;