var scriptMap,defaultHome="Home",baseURL="https://smartdown.site/";"string"===typeof smartdownBaseURL&&(baseURL=smartdownBaseURL),"string"===typeof smartdownDefaultHome&&(defaultHome=smartdownDefaultHome);var gistPathPrefix="",gistHashPrefix="gist/";function cardLoaded(e,t,a){document.body.scrollTop=0,document.documentElement.scrollTop=0,multiparts=smartdown.partitionMultipart(e);var s=document.getElementById("smartdown-output");smartdown.setHome(multiparts._default_,s,(function(){document.body.scrollTop=0,document.documentElement.scrollTop=0,smartdown.startAutoplay(s),inhibitHash="#"+t,window.location.hash=inhibitHash}))}function loadAsyncCard(e,t){var a=new XMLHttpRequest;a.addEventListener("load",(function(){cardLoaded(this.responseText,e,t)})),a.open("GET",t),a.send()}function relativeCardLoaderInline(e){var t=`^/?(${gistPathPrefix})?${gistHashPrefix}([^/]+)/([^/]+)(/(\\w*))?$`,a=new RegExp(t,"g"),s=a.exec(e);if(s){gistOrg=s[2],gistID=s[3];var o=s[5]||"Home";e=o}var r=multiparts[e];if(r){var i=document.getElementById("smartdown-output");smartdown.setHome(r,i,(function(){smartdown.startAutoplay(i)}))}else{var n=window.location.origin+window.location.pathname+e+".md";if(0===e.indexOf("http"))gistOrg="",gistID="",n=e,loadAsyncCard(e,n);else if(0===e.indexOf("/"))gistOrg="",gistID="",n=e,loadAsyncCard(e,n);else if(""!==gistOrg&&""!==gistID){var d=`https://api.github.com/gists/${gistID}`,l=new XMLHttpRequest;l.addEventListener("load",(function(){var t=JSON.parse(this.responseText),a=t.files[e+".md"],s=a.raw_url;e=`${gistHashPrefix}${gistOrg}/${gistID}/${e}`,loadAsyncCard(e,s)})),l.open("GET",d),l.send()}else{gistOrg="",gistID="",e.endsWith(".md")||(e+=".md"),0===e.indexOf("./")&&(e=e.slice(2));var c=scriptMap[e]||"";c=smartdown.decodeInlineScript(c),cardLoaded(c,e,n)}}}function buildScriptMapThenLoadHome(){smartdown.loadCardsFromDocumentScripts(),scriptMap={},smartdown.smartdownScripts.forEach((function(e){var t=e.text;scriptMap[e.id]=t})),loadHome()}var svgIcons={hypercube:"/gallery/resources/Hypercube.svg",Hypercube:"/gallery/resources/Hypercube.svg",badge:"/gallery/resources/badge.svg",StalactiteStalagmite:"/gallery/resources/StalactiteStalagmite.svg",church:"/gallery/resources/church.svg",lighthouse:"/gallery/resources/lighthouse.svg",barn:"/gallery/resources/barn.svg","medieval-gate":"/gallery/resources/medieval-gate.svg"},multiparts={},inhibitHash="",gistOrg="",gistID="";function loadHome(){var e=window.parent.location.hash||window.location.hash;""===e&&(e=defaultHome),e=e.replace(/#/g,""),relativeCardLoaderInline(e)}var calcHandlers=smartdown.defaultCalcHandlers;const replace=window.location.origin+window.location.pathname,linkRules=[];function locationHashChanged(){location.hash}window.onhashchange=locationHashChanged,smartdown.initialize(svgIcons,baseURL,buildScriptMapThenLoadHome,relativeCardLoaderInline,calcHandlers,linkRules);