"use strict";(globalThis["webpackChunksmartdown_editor"]=globalThis["webpackChunksmartdown_editor"]||[]).push([[942],{6051:(e,l,t)=>{t.d(l,{Z:()=>s});var a=t(59835);const n={class:"q-mr-auto q-ml-auto"};function o(e,l){return(0,a.wg)(),(0,a.iD)("div",n,[(0,a.WI)(e.$slots,"default")])}var i=t(11639);const u={},r=(0,i.Z)(u,[["render",o]]),s=r},2942:(e,l,t)=>{t.r(l),t.d(l,{default:()=>D});var a=t(59835),n=t(86970);const o=(0,a._)("hr",null,null,-1),i={key:0},u=["href"],r=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",null,"Filename"),(0,a._)("th",null,"Language"),(0,a._)("th",null,"URL"),(0,a._)("th",null,"Actions")])],-1),s=["href"],d=(0,a._)("hr",null,null,-1),c=["textContent"],m=(0,a._)("span",{class:"q-ml-sm"},"Login to GitHub.",-1);function p(e,l,t,p,g,w){const f=(0,a.up)("q-img"),b=(0,a.up)("q-btn"),_=(0,a.up)("q-card-section"),v=(0,a.up)("q-card"),k=(0,a.up)("q-expansion-item"),h=(0,a.up)("q-list"),y=(0,a.up)("q-card-actions"),C=(0,a.up)("q-dialog"),W=(0,a.up)("q-avatar"),x=(0,a.up)("q-input"),q=(0,a.up)("Container"),V=(0,a.up)("q-page"),Z=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(V,{padding:""},{default:(0,a.w5)((()=>[(0,a.Wm)(q,null,{default:(0,a.w5)((()=>[(0,a._)("h3",null,[(0,a.Wm)(f,{src:"img/Octocat.png",style:{"max-width":"100px"}}),(0,a.Uk)(" GitHub ")]),o,e.loggedIn?((0,a.wg)(),(0,a.iD)("h4",i,[(0,a.Uk)(" Logged in as "),(0,a._)("b",null,(0,n.zw)(e.githubUsername),1)])):(0,a.kq)("",!0),e.loggedIn?((0,a.wg)(),(0,a.j4)(b,{key:1,onClick:e.getGists,flat:"",label:"List Gists",color:"primary"},null,8,["onClick"])):(0,a.kq)("",!0),(0,a.Wm)(h,{bordered:"",class:"rounded-borders"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.gists,((l,t)=>((0,a.wg)(),(0,a.j4)(k,{"expand-separator":"",label:l.name,caption:l.owner.login,modelValue:l.expanded,"onUpdate:modelValue":e=>l.expanded=e,key:t},{default:(0,a.w5)((()=>[(0,a.Wm)(v,null,{default:(0,a.w5)((()=>[(0,a.Wm)(_,null,{default:(0,a.w5)((()=>[(0,a.Wm)(f,{src:l.owner.avatar_url,style:{"max-width":"40px"}},null,8,["src"]),(0,a._)("a",{href:l.html_url,target:"_blank"},(0,n.zw)(l.description),9,u),(0,a._)("table",null,[r,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.files,((t,o)=>((0,a.wg)(),(0,a.iD)("tr",{key:o},[(0,a._)("td",null,(0,n.zw)(t.filename),1),(0,a._)("td",null,(0,n.zw)(t.language),1),(0,a._)("td",null,[(0,a._)("a",{href:t.raw_url,target:"_blank"},(0,n.zw)(t.filename),9,s)]),(0,a._)("td",null,[(0,a.Wm)(b,{onClick:a=>e.previewGistFile(l,t),label:"View",size:"sm",color:"primary"},null,8,["onClick"]),(0,a.Wm)(b,{onClick:a=>e.importGistFile(l,t),label:"Import",size:"sm",color:"primary"},null,8,["onClick"])])])))),128))])])])),_:2},1024)])),_:2},1024)])),_:2},1032,["label","caption","modelValue","onUpdate:modelValue"])))),128))])),_:1}),d,e.loggedIn?((0,a.wg)(),(0,a.j4)(b,{key:2,onClick:e.logout,flat:"",label:"Logout of GitHub",color:"primary"},null,8,["onClick"])):((0,a.wg)(),(0,a.j4)(b,{key:3,onClick:e.getCredentials,flat:"",label:"Login to GitHub",color:"primary"},null,8,["onClick"])),(0,a.Wm)(C,{modelValue:e.preview,"onUpdate:modelValue":l[0]||(l[0]=l=>e.preview=l),persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(v,null,{default:(0,a.w5)((()=>[(0,a._)("pre",{style:{border:"1px solid lightblue",padding:"5px"},textContent:(0,n.zw)(e.previewText)},null,8,c),(0,a.Wm)(y,{align:"right"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(b,{onClick:e.cancelPreview,flat:"",label:"Done",color:"primary"},null,8,["onClick"]),[[Z]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.Wm)(C,{modelValue:e.confirm,"onUpdate:modelValue":l[3]||(l[3]=l=>e.confirm=l),persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(v,null,{default:(0,a.w5)((()=>[(0,a.Wm)(_,{class:"row items-center"},{default:(0,a.w5)((()=>[(0,a.Wm)(W,{icon:"check",color:"primary","text-color":"white"}),m])),_:1}),(0,a.Wm)(x,{modelValue:e.githubUsername,"onUpdate:modelValue":l[1]||(l[1]=l=>e.githubUsername=l),label:"Username",filled:""},null,8,["modelValue"]),(0,a.Wm)(x,{modelValue:e.githubToken,"onUpdate:modelValue":l[2]||(l[2]=l=>e.githubToken=l),label:"Token",filled:""},null,8,["modelValue"]),(0,a.Wm)(y,{align:"right"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(b,{onClick:e.cancel,flat:"",label:"Never Mind",color:"primary"},null,8,["onClick"]),[[Z]]),(0,a.wy)((0,a.Wm)(b,{onClick:e.login,flat:"",label:"Login to GitHub",color:"primary"},null,8,["onClick"]),[[Z]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})}t(69665);var g=t(60499),w=t(28339),f=t(90913),b=t(6051),_=t(85335),v=t(20367);const k=(0,a.aZ)({components:{Container:b.Z},name:"GitHub",setup(){const e=(0,g.iH)(!1),l=(0,g.iH)("OddCutOrb"),t=(0,g.iH)(""),n=(0,g.iH)(!1),o=(0,g.iH)([]),i=(0,g.iH)(!1),u=(0,g.iH)(""),r=(0,w.tv)(),s=(0,v.o)(),d=(0,a.Fl)({get:()=>s.getEditMode.value,set:s.updateEditMode}),c=async()=>{const e=new f.v({}),t=await e.request(`GET /users/${l.value}/gists`,{});o.value=t.data.map((e=>({...e,expanded:!0,name:e.files[Object.keys(e.files)[0]].filename}))).reverse()},m=async(e,l)=>{const t=await fetch(l,{});return t.text()},p=async(e,l)=>{const{filename:t}=l,a=l.raw_url,n=await m(t,a);u.value=await n,i.value=!0},b=async(e,l)=>{const t=e.description,{filename:a}=l,n=l.raw_url,o=await m(a,n),i=new Date,u=a.endsWith(".md")?a.split(".").slice(0,-1).join("."):a,s=`${e.owner.login}/${t}/${u}`,c=`GitHub Gist imported from ${e.html_url}`,p=(0,_.nU)(s);if(p)p.content=o;else{const e={title:s,description:c,content:o,createdAt:i,updatedAt:i};(0,_.AL)(e)}d.value.detailed=!0,r.push(`/note/${s}`)},k=()=>{console.log("#cancel"),e.value=!1},h=()=>{i.value=!1},y=async()=>{console.log("#getCredentials"),e.value=!0},C=async()=>{console.log("#login",l.value,t.value),e.value=!1,n.value=!0,await(0,a.Y3)(),await c()},W=async()=>{console.log("#logout"),n.value=!1,o.value=[]};return(0,a.bv)((async()=>{await C()})),{loggedIn:n,githubUsername:l,githubToken:t,gists:o,getCredentials:y,login:C,logout:W,getGists:c,previewGistFile:p,importGistFile:b,preview:i,cancelPreview:h,previewText:u,confirm:e,cancel:k}}});var h=t(11639),y=t(69885),C=t(70335),W=t(24455),x=t(13246),q=t(44861),V=t(44458),Z=t(63190),G=t(74870),H=t(11821),U=t(61357),Q=t(64152),L=t(62146),I=t(69984),T=t.n(I);const z=(0,h.Z)(k,[["render",p]]),D=z;T()(k,"components",{QPage:y.Z,QImg:C.Z,QBtn:W.Z,QList:x.Z,QExpansionItem:q.Z,QCard:V.Z,QCardSection:Z.Z,QDialog:G.Z,QCardActions:H.Z,QAvatar:U.Z,QInput:Q.Z}),T()(k,"directives",{ClosePopup:L.Z})}}]);